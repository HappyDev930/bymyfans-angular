<div class="card">
    <div class="post-title d-flex align-items-center">

        <div class="profile-thumb">
            <a href="other-profile/{{post.user_id}}">
                <figure class="profile-thumb-middle">
                    <img [src]="post.get_user.profile_pic !== null ? profileUrl : 'assets/client/images/normal.jpg'" alt="profile picture">
                </figure>
            </a>
        </div>

        <div class="posted-author">
            <h3 class="author"><a href="other-profile/{{post.user_id}}">{{post.get_user.name}}</a></h3>
            <span class="post-time">{{post.created_at | date:'medium'}}</span>
        </div>


        <div class="post-settings-bar">
            <img src="assets/icons/menu-icon.png" class="menu-icon" [matMenuTriggerFor]="beforeMenu">
            <mat-menu #beforeMenu="matMenu" xPosition="before">
                <button mat-menu-item>copy link to adda</button>
                <button mat-menu-item>edit post</button>
                <button mat-menu-item>embed adda</button>
            </mat-menu>
        </div>

    </div>

    <div class="post-content">
        <p class="post-desc">
            {{post.content}}
        </p>

        <div>
            <figure class="post-thumb img-popup" *ngFor="let media of post.get_post_media">
                <a href="{{postMediaUrl}}/{{media.file_name}}" *ngIf="media.media_type == 'image/jpeg'">
                    <img src="{{postMediaUrl}}/{{media.file_name}}" alt="post image">
                </a>
                
                <video *ngIf="media.media_type == 'video/mp4'" id="my_video_1" class="video-js vjs-default-skin" width="100%" height="" controls preload="none"
                    poster=''
                    data-setup='{ "aspectRatio":"5:3", "playbackRates": [1, 1.5, 2] }'>
                    <source src="{{postMediaUrl}}/{{media.file_name}}" type='video/mp4' />
                </video>
               
            </figure>
        </div>

        <div class="post-meta">

            <ng-template #tipLike>
                <ul style="font-size: 10px; display: block;">
                    <li *ngFor="let likeUser of post.get_post_likes">{{likeUser.get_user.name}}</li>
                </ul>
            </ng-template>

            <ng-template #commentLike>
                <ul style="font-size: 10px; display: block;">
                    <li *ngFor="let likeUser of post.get_post_comments">{{likeUser.get_user.name}}</li>
                </ul>
            </ng-template>

            <button mat-icon-button color="warn" aria-label="Example icon button with a heart icon" [ngbTooltip]="tipLike"  placement="bottom" tooltipClass="my-custom-class">
                <mat-icon>favorite</mat-icon>
                <span style="color: black;"> {{post.get_post_likes.length}} people like this</span>
            </button>

            <ul class="comment-share-meta">
                <li>
                    <button class="post-comment" [ngbTooltip]="commentLike"  placement="bottom" tooltipClass="my-custom-class">
                        <i class="far fa-comments" aria-hidden="true"></i>
                        <span>{{post.get_post_comments.length}} comments </span>
                    </button>
                </li>
                <li>
                    <button class="post-share">
                        <i class="far fa-share-square"></i>
                        <span>7 shares</span>
                    </button>
                </li>
            </ul>
        </div>
    </div>
    <mat-divider></mat-divider>
    <div class="extra-post">
        <button mat-icon-button>
            <mat-icon>favorite</mat-icon> Like
        </button>
        <button mat-icon-button>
            <i class="far fa-comments" aria-hidden="true"></i> Comment
        </button>
        <button mat-icon-button>
            <i class="far fa-share-square"></i> Share
        </button>
    </div>
    <!-- <mat-divider></mat-divider> -->
    <div class="comment-element">
        <ul class="comments">
            <li *ngFor="let comment of post.get_post_comments" class="comments-content">
                <img class="comment-user-profile" *ngIf="comment.get_user.profile_pic !== null" src="{{userPhotoUrl}}/{{comment.get_user.profile_pic}}">
                <img class="comment-user-profile" *ngIf="comment.get_user.profile_pic === null" src="assets/client/images/normal.jpg">
                <div class="comment-user">
                    <mat-chip class="comment-user-name">
                        <a href="other-profile/{{comment.user_id}}"><span style="font-weight: 600;">{{comment.get_user.name}}</span></a>
                        <div class="comment-content">{{comment.comments}}</div>
                    </mat-chip>
                </div>
            </li>
        </ul>
        <mat-form-field class="comment-typing" appearance="outline">
            <textarea matInput
                      cdkTextareaAutosize
                      #autosize="cdkTextareaAutosize"
                      cdkAutosizeMinRows="1"
                      cdkAutosizeMaxRows="10">
            </textarea>
            <mat-label>Press Enter to comment.</mat-label>
        </mat-form-field>
    </div>
</div>